Je developpe une application web en ws. je suis entrain de faire le frontend pour le relier au websocket.
le frontend est coder en typescript, react avec tailwind css. et si besoinn du scss.
J'attends de toi que me tu creer un frontend tres beau pour gerer les groupes de la personne, de lister les membres du groupe, ceux connecter ou non, afficher qui est le owner du groupe, afficher la liste d'amis, et en fonction du target afficher les bons bouton pour accepter, annuler, bloquer, debloquer la personne.
pour le chat, quand on clique sur une conversation, il faut appeler loadMoreMessage avec le id message a 0 pour recupere les x premier message.
de plus, dans le chat, il est possible de scroller pour remonter dans les anciens message, on passe en parametre a loadMoreMessage l'id du plus ancien message quon a et on recupere les message d'avant.
comment utiliser mes ws :
import useSafeWebSocket from '../api/useSafeWebSocket';

  const handleMessage = (data: any) => {
    const { action } = data;
    switch (action) {}};

  const { socket: ws, status: wsStatus } = useSafeWebSocket({ endpoint: '/chat', onMessage: handleMessage, onStatusChange: setStatus, reconnectDelay: 3000 });
  useEffect(() => setStatus(wsStatus), [wsStatus]);

et voici les reponse du websocket et se quil faut lui envoyer :
a la creation du ws on a comme reponse:
{"action":"init_connected","user":{"id":21,"username":"user2","email":"user2@user2.fr","avatar":null,"lang":"fr"},"groups":[{"id":5,"name":"call of duty","members":[{"id":20,"username":"user1","email":"user1@user1.fr","avatar":null,"lang":"fr"},{"id":21,"username":"user2","email":"user2@user2.fr","avatar":null,"lang":"fr"}],"owners_id":[],"onlines_id":[21,20],"messages":[{"id":334,"sender_id":21,"message":"h","sent_at":"2025-04-20T00:24:46.581Z"},{"id":335,"sender_id":21,"message":"fg","sent_at":"2025-04-20T00:24:46.708Z"},{"id":336,"sender_id":21,"message":"h","sent_at":"2025-04-20T00:24:46.793Z"}]},{"id":3,"name":"minecraft","members":[{"id":20,"username":"user1","email":"user1@user1.fr","avatar":null,"lang":"fr"},{"id":21,"username":"user2","email":"user2@user2.fr","avatar":null,"lang":"fr"}],"owners_id":[],"onlines_id":[21,20],"messages":[{"id":264,"sender_id":21,"message":"message 12","sent_at":"2025-04-19T14:17:04.551Z"},{"id":282,"sender_id":21,"message":"thrth","sent_at":"2025-04-19T15:15:11.756Z"},{"id":283,"sender_id":20,"message":"tyjty","sent_at":"2025-04-19T15:15:14.524Z"},{"id":286,"sender_id":21,"message":"yuk","sent_at":"2025-04-20T00:15:18.505Z"}]}],"friends":[{"id":20,"username":"user1","email":"user1@user1.fr","avatar":null,"lang":"fr"}]}

:automatiquement le front envoie {"action":"ping"}, donc tu n'as pas besoin de gerer ceci par contre,
la reponse du serveur est : {"action":"pong","server_time":1745332766568}
tu dois prendre en compte la difference de temps entre le serveur et l'utilisateur car le serveur tolere seulement 500ms de decalage entre une date now et celle du serveur.

reponse a la deconexion d'un friend :
{"action":"user_disconnected","user":20}

reponse a la connexion d'un friend :
{"action":"friend_connected","user":{"id":20,"username":"user1","email":"user1@user1.fr","avatar":null,"lang":"fr"}}

envoi vers le serveur un new message :
{"action":"new_message","group_id":5,"message":"wef","sent_at":"2025-04-22T14:44:00.146Z"}

reponse du serveur il repond a tous ceux qui sont dans le meme groupe et qui sont connecter, on lenvoi aussi a celui qui a ecrit le message comme ca il a l'id du message :
{"action":"new_message","group_id":5,"message":{"id":354,"sender_id":21,"message":"wef","sent_at":"2025-04-22T14:44:00.146Z"}}


et ty as donc le loadmoremessage qui envoie les x premier message du groupe, si on met en param a firstmessage id = 0, il envoie les 20 message les plus recent pour intialiser la conversation. si on lui donne l'id il fera pareille mais pour les 20 messages jsute apres cette id, et si elle retourne [], c'est qu'il y a plus de message a charger.
envoie vers le serveur :
{"action":"loadMoreMessage","group_id":5,"firstMessageId":334}

{ "action": "loadMoreMessage", "group_id": 5, "messages": [{ "id": 315, "sender_id": 21, "message": "fg", "sent_at": "2025-04-20T00:24:44.755Z" }, { "id": 316, "sender_id": 21, "message": "h", "sent_at": "2025-04-20T00:24:44.843Z" }] }